{% extends "auction/base.html" %}
{% block content %} 


{% if user.is_authenticated %}

<div class="error-box">
    {% if messages %}
    <ul class="messages">
        {% for message in messages %}
        <li class="{{ message.tags }}">{{ message }}</li>
        {% endfor %}
    </ul>
    {% endif %}
</div>
<div class="profile-container">
    <div class="profile-pic">
        <img src="https://st2.depositphotos.com/1009634/7235/v/600/depositphotos_72350117-stock-illustration-no-user-profile-picture-hand.jpg" alt="*insert image here!*" class="#">
        </br>
        <p>*Upload image button*</p>
        </br>
        <small>Date joined: {{ user.date_joined|date }}</small>
        </br>
        <small>Last login: {{ user.last_login|date:"d.m.Y H:i:s" }} UTC </small>
    </div>
    <form action="{% url 'auction:profile' %}" method="POST" enctype="multipart/form-data" class="form-style">
        {% csrf_token %}
        <div class="profile">
            <h2>Username: {{ user.username }}</h2>
        </div>

        <div class="profile-container-info">
            <div class="profile-input">
                <p>{{ user.email }}</p>
                <p>Email</p>
            </div>
            <input type="checkbox" class="toggle" id="email" onclick="test()">
            <label for="email" class="toggle-label"><small>Change email</small></label>
            <div class="toggle-input">
                <input type="email" name="email" placeholder="new@email.com">
            </div>
        </div>

        <div class="profile-container-info">
            <div class="profile-input">
                <p>{{ user.first_name }} {{ user.last_name }}</p>
                <p>Fullname</p>
            </div>
            <input type="checkbox" class="toggle" id="name" onclick="test()">
            <label for="name" class="toggle-label"><small>Change your name</small></label>
            <div class="toggle-input">
                <input type="text" name="first-name" placeholder="First name">
                <input type="text" name="last-name" placeholder="Last name">
            </div>
        </div>

        <div class="profile-container-info">
            <div class="profile-input">
                <p>{{ user.location }}</p>
                <p>Location</p>
            </div>
            <input type="checkbox" class="toggle" id="location" onclick="test()">
            <label for="location" class="toggle-label"><small>Change Location</small></label>
            <div class="toggle-input">
                <input type="text" name="location" placeholder="New location">
            </div>
        </div>

        <div class="profile-container-info">
            <div class="profile-input">
                <p>+372 {{ user.phone }}</p>
                <p>Phone</p>
            </div>
            <input type="checkbox" class="toggle" id="phone" onclick="test()">
            <label for="phone" class="toggle-label"><small>Change Phone Number</small></label>
            <div class="toggle-input">
                <input type="number" name="phone" placeholder="+372-530000321">
            </div>
        </div>

        <div class="profile-container-info">
            <input type="checkbox" class="toggle" id="user_password" onclick="test()">
            <label for="user_password" class="toggle-label"><small>Change password</small></label>
            <div class="toggle-input">
                <input type="password" name="user_password1" placeholder="Password">
                <input type="password" name="user_password2" placeholder="Confirm Password">
            </div>
        </div>


<!--        <div id="update-nupp" style="display:none">-->
            <button type="submit" class="form-button" name="password_change" id="update-nupp" style="display:none">Update Profile</button>
<!--        </div>-->
    </form>
{% endif %}
</div>
    <script>
        function test() {
            var content = document.getElementById("update-nupp");
            let toggleFields = document.getElementsByClassName('toggle')
            console.log(toggleFields)
            for (let i = 0; i < toggleFields.length; i++) {
                if (toggleFields[i].checked == true) {
                    content.style.display = "block";
                    break;
                }
                else {
                    content.style.display = "none";
                }
            }
        }
    </script>

{% endblock content %}