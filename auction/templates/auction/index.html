{% extends "auction/base.html" %}
{% load static %}

{% block content%}
{% if not user.is_authenticated %}
    <a href="{% url 'register' %}"><div class="join-now">Join now!</div></a>
{% endif %}


<div class="">
        <div class="category">
            <div class="category-text">
                <div class="banner">
                    <img src="https://images.unsplash.com/photo-1563013544-824ae1b704d3?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1950&q=80">
                    <h2>WE NEED YOUR GOLD!</h2>
                </div>
                <div class="category-container">
                    {% for category in categories %}
                    <div class="boxx">
                        <a href="#" class="category-link">{{ category }}</a>
                    </div>
                    {% endfor %}
                </div>

            </div>
        </div>

        <div class="auction-container">
            <h2>Discover:</h2>
            <div class="auction-grid">
                {% for auction in all_auctions %}
                    {% if auction.is_active %}
                        <a href="{% url 'auction:detail' auction.id %}">
                            <div class="img-container-background" style="background-image:url('{% static auction.get_first_image.image %}')">
                                <div class="img-overlay">
                                    <div class="img-text">
                                        <p>Product: {{auction.title}}</p>
                                        <p>ID: {{auction.id}}</p>
                                        <p>price: {{auction.min_value}}€</p>
                                        {% if auction.is_active %}
                                            <p>{% widthratio auction.seconds_remaining 60 1 %} minutes left</p>
                                            <!--Time remaining {{auction.seconds_remaining|floatformat:"0"}}-->
                                        {% else %}
                                            <p>Auction has ended!</p>
                                        {% endif %}
                                        <p>Seller: {{auction.author}}</p>
                                    </div>
                                </div>
                            </div>
                        </a>
                    {% endif %}
                {% endfor %}
            </div>
            </div>


        <div class="auction-container">
            <h2>Last added:</h2>
            <div class="auction-grid">
                {% for auction in last_added %}
                    <a href="{% url 'auction:detail' auction.id %}">
                        <div class="img-container-background" style="background-image:url('{% static auction.get_first_image.image %}')">
                            <div class="img-overlay">
                                <div class="img-text">
                                    <p>Product: {{auction.title}}</p>
                                    <p>ID: {{auction.id}}</p>
                                    <p>price: {{auction.min_value}}€</p>
                                    {% if auction.is_active %}
                                        <p>{% widthratio auction.seconds_remaining 60 1 %} minutes left</p>
                                    {% else %}
                                        <p>Auction has ended!</p>
                                    {% endif %}
                                    <p>Seller: {{auction.author}}</p>
                                </div>
                            </div>
                        </div>
                    </a>
                {% endfor %}
            </div>
            </div>

            <div class="auction-container">
                <h2>Ending soon:</h2>
                <div class="auction-grid">
                    {% for auction in ending_soon %}
                        <a href="{% url 'auction:detail' auction.id %}">
                            <div class="img-container-background" style="background-image:url('{% static auction.get_first_image.image %}')">
                                <div class="img-overlay">
                                    <div class="img-text">
                                        <p>Product: {{auction.title}}</p>
                                        <p>ID: {{auction.id}}</p>
                                        <p>price: {{auction.min_value}}€</p>
                                        {% if auction.is_active %}
                                            <p>{% widthratio auction.seconds_remaining 60 1 %} minutes left</p>
                                            <!--Time remaining {{auction.seconds_remaining|floatformat:"0"}}-->
                                        {% else %}
                                            <p>Auction has ended!</p>
                                        {% endif %}
                                        <p>Seller: {{auction.author}}</p>
                                    </div>
                                </div>
                            </div>
                        </a>
                    {% endfor %}
                </div>
                </div>

                <div class="auction-container">
                    <h2>Auctions ended:</h2>
                    <div class="auction-grid">
                        {% for auction in ending_soon %}
                            {% if not auction.is_active %}
                                <a href="{% url 'auction:detail' auction.id %}">
                                    <div class="img-container-background" style="background-image:url('{% static auction.get_first_image.image %}')">
                                        <div class="img-overlay">
                                            <div class="img-text">
                                                <p>Product: {{auction.title}}</p>
                                                <p>ID: {{auction.id}}</p>
                                                <p>price: {{auction.min_value}}€</p>
                                                {% if auction.is_active %}
                                                    <p>{% widthratio auction.seconds_remaining 60 1 %} minutes left</p>
                                                    <!--Time remaining {{auction.seconds_remaining|floatformat:"0"}}-->
                                                {% else %}
                                                    <p>Auction has ended!</p>
                                                {% endif %}
                                                <p>Seller: {{auction.author}}</p>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            {% endif %}
                        {% endfor %}
                    </div>
                    </div>

        <!--<div class="new">

                <h1>Last added</h1>
                {% for i in auctions_list %}
                    {{ i.title }} | Category <br>
                {% endfor %}
            </div>

            <div class="old">
                <h1>Ending auctions</h1>
                {% for j in auctions_list %}
                    {{ j.title }} | Category | Expire time<br>
                {% endfor %}
            </div> -->
        </div>
    </div>
{% endblock content %}